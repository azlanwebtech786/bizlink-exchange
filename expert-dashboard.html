<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bizlink 10X â€“ Expert Team Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{margin:0;font-family:Poppins;background:#020617;color:#e5e7eb}
.container{max-width:1200px;margin:auto;padding:24px}
.card{background:#0f172a;border:1px solid rgba(148,163,184,.15);border-radius:14px;padding:20px;margin-bottom:20px}
.topbar{display:flex;justify-content:space-between;align-items:center}
.small{font-size:13px;color:#94a3b8}
input,select,button{width:100%;padding:10px;border-radius:10px;border:none;background:#020617;color:#fff;margin-top:8px}
button{background:linear-gradient(90deg,#8b5cf6,#ec4899);font-weight:600;cursor:pointer}
.grid{display:grid;gap:16px}
.grid-2{grid-template-columns:1fr 1fr}
.grid-3{grid-template-columns:repeat(3,1fr)}
.grid-4{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}
.work-table{width:100%;border-collapse:collapse;margin-top:12px}
.work-table th,.work-table td{padding:12px;border-bottom:1px solid rgba(148,163,184,.12)}
.status{padding:6px 12px;border-radius:999px;font-size:12px;font-weight:600}
.processing{background:#3b2f12;color:#facc15}
.live{background:#1e3a8a;color:#93c5fd}
.completed{background:#163c2a;color:#4ade80}
.paused{background:#3f1d1d;color:#f87171}
</style>
</head>

<body>
<div class="container">

<div class="card topbar">
  <div>
    <h2>Bizlink 10X â€“ Expert Team Dashboard</h2>
    <div class="small">Execution Panel | Expert Team</div>
  </div>
</div>

<div class="card">
  <label class="small">Enter Client ID</label>
  <input id="clientIdInput" placeholder="e.g. SCH001">
  <button onclick="loadClient()">Load Client</button>
</div>

<div class="card grid grid-4">
  <div><b>Client</b><br><span id="clientLabel">â€”</span></div>
  <div><b>Plan</b><br>Premium 10X</div>
  <div><b>Month</b><br>Current</div>
  <div><b>Status</b><br>Active âœ…</div>
</div>

<div class="card">
<h3>ðŸ“Œ All Work Status</h3>
<table class="work-table">
<thead>
<tr><th>Work</th><th>Status</th><th>Change</th></tr>
</thead>
<tbody id="workList"></tbody>
</table>

<div class="grid grid-2">
<input id="newWork" placeholder="Ads / SEO / Reel">
<select id="newStatus">
<option>Processing</option>
<option>Live</option>
<option>Completed</option>
</select>
</div>
<button onclick="addWork()">+ Add Work</button>
</div>

<div class="card">
<h3>ðŸ“¢ Ads Performance</h3>
<div class="grid grid-4">
<input id="adsReach" placeholder="Reach">
<input id="adsSpend" placeholder="Spend">
<input id="adsLeads" placeholder="Leads">
<input id="adsCpl" placeholder="Avg CPL">
</div>
<button onclick="saveAds()">Save Ads</button>
</div>

<div class="card">
<h3>ðŸ’° Sales Impact</h3>
<div class="grid grid-3">
<input id="sales" placeholder="Sales">
<input id="revenue" placeholder="Revenue">
<input id="growth" placeholder="Growth %">
</div>
<button onclick="saveSales()">Save Sales</button>
</div>

<div class="card">
<h3>ðŸ“Š Monthly Report</h3>
<ul id="reportList"></ul>
<button onclick="downloadReport()">â¬‡ Download Report</button>
</div>

</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbyphTkoh0ldOvtEMjQMfexF61QHQpfNsYHwNcRh7yu9wvrxspXk0pkDY9EjRSuWwAvZ/exec";
let activeClient=null;

async function loadClient(){
  const id=document.getElementById("clientIdInput").value;
  if(!id) return alert("Client ID missing");
  activeClient=id;
  const res=await fetch(API_URL+"?clientId="+id);
  const data=await res.json();
  document.getElementById("clientLabel").innerText=id;
  renderWorks(data.works||[]);
  renderReport(data.works||[]);
}

function renderWorks(works){
  const tb=document.getElementById("workList");
  tb.innerHTML="";
  works.forEach(w=>{
    tb.innerHTML+=`
    <tr>
      <td>${w.name}</td>
      <td><span class="status ${w.status.toLowerCase()}">${w.status}</span></td>
      <td>
        <select onchange="updateWork('${w.name}',this.value)">
          <option>Processing</option>
          <option>Live</option>
          <option>Completed</option>
        </select>
      </td>
    </tr>`;
  });
}

function renderReport(works){
  const ul=document.getElementById("reportList");
  ul.innerHTML="";
  works.filter(w=>w.status==="Completed").forEach(w=>{
    ul.innerHTML+=`<li>âœ” ${w.name}</li>`;
  });
}

async function addWork(){
  await fetch(API_URL,{
    method:"POST",
    body:JSON.stringify({
      action:"addWork",
      clientId:activeClient,
      workName:newWork.value,
      status:newStatus.value
    })
  });
  loadClient();
}

async function updateWork(name,status){
  await fetch(API_URL,{
    method:"POST",
    body:JSON.stringify({
      action:"updateWork",
      clientId:activeClient,
      workName:name,
      status
    })
  });
  loadClient();
}

async function saveAds(){
  await fetch(API_URL,{method:"POST",body:JSON.stringify({
    action:"updateAds",
    clientId:activeClient,
    reach:adsReach.value,
    spend:adsSpend.value,
    leads:adsLeads.value,
    cpl:adsCpl.value
  })});
  alert("Ads Saved");
}

async function saveSales(){
  await fetch(API_URL,{method:"POST",body:JSON.stringify({
    action:"updateSales",
    clientId:activeClient,
    sales:sales.value,
    revenue:revenue.value,
    growth:growth.value
  })});
  alert("Sales Saved");
}

function downloadReport(){
  alert("Report auto synced from backend");
}
</script>
</body>
</html>
