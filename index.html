<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BizLink Exchange | Home</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(to bottom right, #6a11cb, #2575fc);
      color: white;
    }
    .card {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 1rem;
      padding: 1.5rem;
      text-align: left;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }
    .card:hover {
      transform: translateY(-5px);
      background: rgba(255, 255, 255, 0.2);
    }
    .category-tag {
      background: rgba(255, 255, 255, 0.2);
      color: #fff;
      padding: 0.3rem 0.8rem;
      border-radius: 9999px;
      font-size: 0.8rem;
    }
    .filter-btn.active {
      background: #6a11cb;
      color: white;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">

  <!-- Hero Section -->
  <section class="text-center py-16">
    <h1 class="text-4xl font-bold mb-2">BizLink Exchange</h1>
    <p class="text-lg text-gray-200 mb-6">Connect Skills. Build Business. Grow Together üöÄ</p>
    
    <a href="get-listed.html" class="bg-white text-indigo-600 px-5 py-3 rounded-full font-semibold shadow hover:bg-gray-200 transition">
      + Get Listed
    </a>
  </section>

  <!-- Search + Filters -->
  <section class="max-w-5xl mx-auto text-center px-4">
    <input id="searchInput" type="text" placeholder="Search business, category, or city..."
      class="w-full p-3 rounded-full text-gray-800 outline-none shadow mb-6" />
    
    <div class="flex flex-wrap justify-center gap-3 mb-10">
      <button class="filter-btn active px-4 py-2 bg-white/20 rounded-full" data-sheet="startups">Startups</button>
      <button class="filter-btn px-4 py-2 bg-white/20 rounded-full" data-sheet="Small_Business">Small Business</button>
      <button class="filter-btn px-4 py-2 bg-white/20 rounded-full" data-sheet="corporate">Corporate</button>
      <button class="filter-btn px-4 py-2 bg-white/20 rounded-full" data-sheet="freelancers">Freelancers</button>
    </div>
  </section>

  <!-- Profiles Section -->
  <section id="profiles" class="grid gap-6 max-w-6xl mx-auto px-6 pb-20 sm:grid-cols-2 lg:grid-cols-3 text-black">
    <p class="text-center text-white">Loading profiles...</p>
  </section>

  <!-- Footer -->
  <footer class="text-center py-6 text-sm text-gray-300">
    ¬© 2025 BizLink Exchange. All Rights Reserved.
  </footer>

  <script>
  const scriptURL = "https://script.google.com/macros/s/AKfycbxIeAIhIagyHXO-h-dyUjxm0ifPwHj-QNIkgN8VRKPPvPyBG1OjjAc1sJ8_1_A2r2PT6A/exec";
  const profilesContainer = document.getElementById("profiles");
  const buttons = document.querySelectorAll(".filter-btn");
  const searchInput = document.getElementById("searchInput");
  let allProfiles = [];

  async function loadProfiles(sheet) {
    profilesContainer.innerHTML = `<p class='text-white'>Loading profiles...</p>`;
    try {
      const res = await fetch(`${scriptURL}?sheet=${sheet}`);
      const data = await res.json();

      if (data.status !== "success" || !data.data || data.data.length <= 1) {
        profilesContainer.innerHTML = "<p class='text-white'>No profiles found.</p>";
        return;
      }

      const rows = data.data.slice(1); // Skip headers
      allProfiles = rows.map((r, i) => ({
        name: r[1] || "Unnamed",
        role: r[2] || "-",
        email: r[3] || "-",
        category: r[4] || "-",
        desc: r[5] || "-",
        city: r[6] || "-",
        id: `${sheet}-${i + 2}`,
      }));

      renderProfiles(allProfiles);
    } catch (err) {
      console.error(err);
      profilesContainer.innerHTML = "<p class='text-white'>‚ùå Error fetching data.</p>";
    }
  }

  function renderProfiles(list) {
    if (!list.length) {
      profilesContainer.innerHTML = "<p class='text-white'>No matching profiles found.</p>";
      return;
    }
    profilesContainer.innerHTML = list.map(p => `
      <div class="card text-white">
        <span class="category-tag">${p.category}</span>
        <h2 class="text-xl font-semibold mt-2 mb-1">${p.name}</h2>
        <p class="text-sm">üìç ${p.city}</p>
        <p class="text-sm mt-2 mb-3">${p.desc}</p>
        <a href="profile.html?id=${p.id}" target="_blank" class="inline-block bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium">View Details</a>
      </div>
    `).join("");
  }

  buttons.forEach(btn => {
    btn.addEventListener("click", () => {
      buttons.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      loadProfiles(btn.dataset.sheet);
    });
  });

  searchInput.addEventListener("input", () => {
    const q = searchInput.value.toLowerCase();
    const filtered = allProfiles.filter(p =>
      p.name.toLowerCase().includes(q) ||
      p.category.toLowerCase().includes(q) ||
      p.city.toLowerCase().includes(q)
    );
    renderProfiles(filtered);
  });

  // Load default: startups
  loadProfiles("startups");
  </script>

</body>
</html>
