<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BizLink Exchange</title>
  <style>
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: linear-gradient(to bottom right, #e4e8ff, #f6f7ff);
      color: #2d2d2d;
    }

    header {
      text-align: center;
      background: linear-gradient(135deg, #6a11cb, #2575fc);
      color: white;
      padding: 60px 20px 40px;
      border-bottom-left-radius: 50px;
      border-bottom-right-radius: 50px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    header h1 {
      font-size: 38px;
      margin-bottom: 10px;
    }

    header p {
      font-size: 16px;
      opacity: 0.9;
    }

    .search-bar {
      display: flex;
      justify-content: center;
      margin-top: -25px;
    }

    .search-bar input {
      width: 80%;
      max-width: 600px;
      padding: 14px 18px;
      border-radius: 30px;
      border: none;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      font-size: 15px;
      outline: none;
    }

    .filter-bar {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin: 30px 0;
    }

    .filter-btn {
      background: white;
      border: 1px solid #ccc;
      color: #444;
      padding: 8px 18px;
      border-radius: 25px;
      cursor: pointer;
      transition: 0.3s;
      font-size: 14px;
    }

    .filter-btn:hover, .filter-btn.active {
      background: linear-gradient(135deg, #6a11cb, #2575fc);
      color: white;
      border: none;
    }

    .profiles {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      padding: 20px 40px 60px;
    }

    .card {
      background: white;
      border-radius: 20px;
      box-shadow: 0 4px 25px rgba(0, 0, 0, 0.08);
      padding: 25px;
      text-align: left;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
    }

    .card h2 {
      margin: 0 0 10px;
      color: #333;
      font-size: 20px;
      font-weight: 600;
    }

    .category-tag {
      display: inline-block;
      padding: 4px 10px;
      font-size: 12px;
      border-radius: 15px;
      background: rgba(106, 17, 203, 0.1);
      color: #6a11cb;
      margin-bottom: 10px;
    }

    .card p {
      font-size: 14px;
      color: #555;
      margin: 5px 0;
    }

    .card a {
      display: inline-block;
      background: linear-gradient(135deg, #6a11cb, #2575fc);
      color: white;
      text-decoration: none;
      padding: 8px 14px;
      border-radius: 20px;
      font-size: 13px;
      margin-top: 10px;
      transition: 0.3s;
    }

    .card a:hover {
      background: #4c0fd8;
    }

    footer {
      text-align: center;
      padding: 20px;
      font-size: 13px;
      color: #666;
      background: #f4f6ff;
    }
  </style>
</head>
<body>
  <header>
    <h1>BizLink Exchange</h1>
    <p>Connect Skills. Build Business. Grow Together üöÄ</p>
  </header>

  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search business, category, or city..." />
  </div>

  <div class="filter-bar">
    <button class="filter-btn active" data-sheet="startups">Startups</button>
    <button class="filter-btn" data-sheet="Small_Business">Small Business</button>
    <button class="filter-btn" data-sheet="corporate">Corporate</button>
    <button class="filter-btn" data-sheet="freelancers">Freelancers</button>
  </div>

  <div class="profiles" id="profiles">Loading profiles...</div>

  <footer>¬© 2025 BizLink Exchange. All Rights Reserved.</footer>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbxIeAIhIagyHXO-h-dyUjxm0ifPwHj-QNIkgN8VRKPPvPyBG1OjjAc1sJ8_1_A2r2PT6A/exec";
const profilesContainer = document.getElementById("profiles");
const buttons = document.querySelectorAll(".filter-btn");
const searchInput = document.getElementById("searchInput");
let allProfiles = [];

async function loadProfiles(sheet) {
  profilesContainer.innerHTML = "Loading profiles...";
  try {
    const res = await fetch(`${scriptURL}?sheet=${sheet}`);
    const data = await res.json();

    if (data.status !== "success" || !data.data || data.data.length <= 1) {
      profilesContainer.innerHTML = "<p>No profiles found.</p>";
      return;
    }

    // Skip header row
    const rows = data.data.slice(1);

    allProfiles = rows.map((r, i) => ({
      name: r[1] || "Unnamed",
      role: r[2] || "-",
      email: r[3] || "-",
      category: r[4] || "-",
      desc: r[5] || "-",
      city: r[6] || "-",
      id: `${sheet}-${i + 2}`,
    }));

    renderProfiles(allProfiles);
  } catch (err) {
    console.error(err);
    profilesContainer.innerHTML = "<p>Error fetching data ‚ùå</p>";
  }
}

function renderProfiles(list) {
  if (!list.length) {
    profilesContainer.innerHTML = "<p>No matching profiles found.</p>";
    return;
  }
  profilesContainer.innerHTML = list.map(p => `
    <div class="card">
      <span class="category-tag">${p.category}</span>
      <h2>${p.name}</h2>
      <p>üìç ${p.city}</p>
      <p>${p.desc}</p>
      <a href="profile.html?id=${p.id}" target="_blank">View Details</a>
    </div>
  `).join("");
}

buttons.forEach(btn => {
  btn.addEventListener("click", () => {
    buttons.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    loadProfiles(btn.dataset.sheet);
  });
});

searchInput.addEventListener("input", () => {
  const q = searchInput.value.toLowerCase();
  const filtered = allProfiles.filter(p =>
    p.name.toLowerCase().includes(q) ||
    p.category.toLowerCase().includes(q) ||
    p.city.toLowerCase().includes(q)
  );
  renderProfiles(filtered);
});

loadProfiles("startups");
</script>
</body>
</html>
