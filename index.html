<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BizLink Exchange | Home</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(to bottom right, #6a11cb, #2575fc);
      color: white;
    }
    .card {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 1rem;
      padding: 1.5rem;
      text-align: left;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }
    .card:hover {
      transform: translateY(-5px);
      background: rgba(255, 255, 255, 0.2);
    }
    .category-tag {
      background: rgba(255, 255, 255, 0.2);
      color: #fff;
      padding: 0.3rem 0.8rem;
      border-radius: 9999px;
      font-size: 0.8rem;
    }
    .filter-btn.active {
      background: #6a11cb;
      color: white;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">

  <!-- Hero Section -->
  <section class="text-center py-16">
    <h1 class="text-4xl font-bold mb-2">BizLink Exchange</h1>
    <p class="text-lg text-gray-200 mb-6">Connect Skills. Build Business. Grow Together üöÄ</p>
    
    <a href="get-listed.html" class="bg-white text-indigo-600 px-5 py-3 rounded-full font-semibold shadow hover:bg-gray-200 transition">
      + Get Listed
    </a>
  </section>

  <!-- Search + Filters -->
  <section class="max-w-5xl mx-auto text-center px-4">
    <input id="searchInput" type="text" placeholder="Search business, category, or city..."
      class="w-full p-3 rounded-full text-gray-800 outline-none shadow mb-6" />
    
    <div class="flex flex-wrap justify-center gap-3 mb-10">
      <button class="filter-btn active px-4 py-2 bg-white/20 rounded-full" data-sheet="startups">Startups</button>
      <button class="filter-btn px-4 py-2 bg-white/20 rounded-full" data-sheet="Small_Business">Small Business</button>
      <button class="filter-btn px-4 py-2 bg-white/20 rounded-full" data-sheet="corporate">Corporate</button>
      <button class="filter-btn px-4 py-2 bg-white/20 rounded-full" data-sheet="freelancers">Freelancers</button>
    </div>
  </section>

  <!-- Profiles Section -->
  <section id="profiles" class="grid gap-6 max-w-6xl mx-auto px-6 pb-20 sm:grid-cols-2 lg:grid-cols-3 text-black">
    <p class="text-center text-white">Loading profiles...</p>
  </section>

  <!-- Footer -->
  <footer class="text-center py-6 text-sm text-gray-300">
    ¬© 2025 BizLink Exchange. All Rights Reserved.
  </footer>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbxIeAIhIagyHXO-h-dyUjxm0ifPwHj-QNIkgN8VRKPPvPyBG1OjjAc1sJ8_1_A2r2PT6A/exec";
const profilesContainer = document.getElementById("profiles");
const searchInput = document.getElementById("searchInput");
const filterButtons = document.querySelectorAll(".filter-btn");

let allProfiles = [];
let activeCategory = "startups";

// ‚úÖ Fetch and display data
async function fetchProfiles(category = "startups") {
  profilesContainer.innerHTML = `<p>Loading profiles...</p>`;
  try {
    const response = await fetch(`${scriptURL}?sheet=${category}`);
    const data = await response.json();

    if (!data || data.length === 0) {
      profilesContainer.innerHTML = `<p>No profiles found.</p>`;
      return;
    }

    allProfiles = data;
    displayProfiles(data);
  } catch (error) {
    profilesContainer.innerHTML = `<p>Error loading profiles üòû</p>`;
    console.error("Fetch error:", error);
  }
}

// ‚úÖ Display profiles
function displayProfiles(profiles) {
  profilesContainer.innerHTML = profiles
    .map(
      (p) => `
      <div class="bg-white rounded-2xl shadow-md p-5 text-left transition hover:-translate-y-1 hover:shadow-lg duration-300">
        <h3 class="font-semibold text-lg text-gray-800 mb-2">${p["Business Name"]}</h3>
        <p class="text-sm text-gray-600 mb-1">üë§ ${p["Owner Name"]}</p>
        <p class="text-sm text-gray-600 mb-1">üìç ${p["City"]}</p>
        <p class="text-sm text-gray-500 mb-3">${p["Description"] || "No description"}</p>
        <a href="${p["ProfileLink"]}" target="_blank" class="inline-block bg-purple-600 text-white text-sm px-4 py-2 rounded-full hover:bg-purple-700 transition">
          View Profile
        </a>
      </div>`
    )
    .join("");
}

// ‚úÖ Filter Buttons
filterButtons.forEach((btn) => {
  btn.addEventListener("click", () => {
    filterButtons.forEach((b) => b.classList.remove("bg-purple-600", "text-white"));
    btn.classList.add("bg-purple-600", "text-white");
    activeCategory = btn.dataset.category;
    fetchProfiles(activeCategory);
  });
});

// ‚úÖ Search
searchInput.addEventListener("input", (e) => {
  const term = e.target.value.toLowerCase();
  const filtered = allProfiles.filter(
    (p) =>
      p["Business Name"].toLowerCase().includes(term) ||
      p["Category"].toLowerCase().includes(term) ||
      p["City"].toLowerCase().includes(term)
  );
  displayProfiles(filtered);
});

// ‚úÖ Initial load
fetchProfiles(activeCategory);
</script>

</body>
</html>
