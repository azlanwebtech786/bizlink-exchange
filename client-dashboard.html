<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BizLink 10X Grow Lab | Client Overview</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
  box-sizing:border-box;
  font-family: Arial, Helvetica, sans-serif;
}
body{
  margin:0;
  background:#0f1115;
  color:#fff;
}
.container{
  max-width:1100px;
  margin:auto;
  padding:20px;
}
.top-card{
  background:#161a22;
  padding:20px;
  border-radius:12px;
  margin-bottom:20px;
}
.top-card h2{
  margin:0;
  font-size:26px;
}
.top-card p{
  margin:6px 0 16px;
  color:#aaa;
}
.summary{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:15px;
}
.summary-box{
  background:#1e2330;
  padding:15px;
  border-radius:10px;
}
.summary-box span{
  font-size:12px;
  color:#aaa;
}
.summary-box strong{
  display:block;
  font-size:18px;
  margin-top:6px;
}
.actions{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:15px;
  margin:20px 0;
}
.actions button{
  padding:18px;
  font-size:16px;
  border-radius:10px;
  border:none;
  cursor:pointer;
  background:#6a5cff;
  color:#fff;
}
.actions button:hover{
  background:#584ae6;
}
.system-msg{
  background:#121621;
  padding:15px;
  border-left:4px solid #6a5cff;
  border-radius:6px;
  margin-bottom:20px;
  color:#ccc;
}
#dynamicContent{
  background:#161a22;
  padding:20px;
  border-radius:12px;
  min-height:120px;
}
.loading{
  color:#aaa;
}
</style>
</head>

<body>

<div class="container">

  <!-- TOP OVERVIEW -->
  <div class="top-card">
    <h2 id="clientName">Loading...</h2>
    <p id="businessName"></p>

    <div class="summary">
      <div class="summary-box">
        <span>Active Plan</span>
        <strong id="planName">‚Äî</strong>
      </div>
      <div class="summary-box">
        <span>Current Phase</span>
        <strong id="currentPhase">‚Äî</strong>
      </div>
      <div class="summary-box">
        <span>Status</span>
        <strong id="systemStatus">‚Äî</strong>
      </div>
    </div>
  </div>

  <!-- ACTION BUTTONS -->
  <div class="actions">
    <button onclick="loadSection('getTodayTasks')">üìã Today‚Äôs Tasks</button>
    <button onclick="loadSection('getClientProgress')">üìà Progress Report</button>
    <button onclick="loadSection('getClientFreelancers')">üë• Active Freelancers</button>
    <button onclick="loadSection('getClientHistory')">üïò History / Logs</button>
  </div>

  <!-- SYSTEM MESSAGE -->
  <div class="system-msg" id="systemMessage">
    System loading...
  </div>

  <!-- DYNAMIC CONTENT -->
  <div id="dynamicContent" class="loading">
    Select any section above
  </div>

</div>

<script>
/* =========================
   CONFIG
========================= */
const API_BASE = "https://script.google.com/macros/s/AKfycbzJvUnmkM7wUuvNt0XaSHE7YEn1FnLqQ2XX-Fues2h4q53MuGtRkoU0iGJ1auI1lSqoRQ/exec";
const clientId = localStorage.getItem("clientId") || "demo";

/* =========================
   LOAD OVERVIEW
========================= */
document.addEventListener("DOMContentLoaded", loadOverview);

function loadOverview(){
  fetch(`${API_BASE}?action=getClientBasicOverview&clientId=${clientId}`)
    .then(res => res.json())
    .then(data => {
      document.getElementById("clientName").innerText = data.clientName || "Client";
      document.getElementById("businessName").innerText = data.businessName || "";
      document.getElementById("planName").innerText = data.plan || "-";
      document.getElementById("currentPhase").innerText = data.phase || "-";
      document.getElementById("systemStatus").innerText = data.status || "-";
      document.getElementById("systemMessage").innerText =
        data.message || "Your growth system is active.";
    })
    .catch(()=>{
      document.getElementById("systemMessage").innerText =
        "‚ö†Ô∏è Overview load nahi ho pa raha. Refresh karein.";
    });
}

/* =========================
   LOAD OTHER SECTIONS
========================= */
function loadSection(action){
  const box = document.getElementById("dynamicContent");
  box.classList.add("loading");
  box.innerHTML = "Loading...";

  fetch(`${API_BASE}?action=${action}&clientId=${clientId}`)
    .then(res => res.text())
    .then(html => {
      box.classList.remove("loading");
      box.innerHTML = html;
    })
    .catch(()=>{
      box.innerHTML = "‚ö†Ô∏è Data load failed.";
    });
}
</script>

</body>
</html>
