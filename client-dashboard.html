<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BizLink 10X | Client Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{font-family:Poppins;background:#050816;color:#e5e7eb}
.card{background:#0f172a;border:1px solid rgba(148,163,184,.3)}
.badge-ok{color:#22c55e}
.badge-warn{color:#facc15}
.badge-bad{color:#ef4444}
</style>
</head>

<body class="min-h-screen">

<header class="bg-slate-950 border-b border-slate-800">
  <div class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center">
    <h1 class="text-xl font-bold">
      BizLink <span class="text-purple-400">10X Client Dashboard</span>
    </h1>
    <span id="clientEmail" class="text-xs text-slate-400"></span>
  </div>
</header>

<main class="max-w-6xl mx-auto px-6 py-6 space-y-6">

<!-- TOP METRICS -->
<section class="grid sm:grid-cols-4 gap-4">
  <div class="card p-4 rounded-xl">
    <p class="text-xs text-slate-400">Total Leads</p>
    <p id="mLeads" class="text-2xl font-bold text-emerald-400">0</p>
  </div>
  <div class="card p-4 rounded-xl">
    <p class="text-xs text-slate-400">Total Sales</p>
    <p id="mSales" class="text-2xl font-bold text-sky-400">0</p>
  </div>
  <div class="card p-4 rounded-xl">
    <p class="text-xs text-slate-400">Conversion %</p>
    <p id="mConv" class="text-2xl font-bold text-yellow-300">0%</p>
  </div>
  <div class="card p-4 rounded-xl">
    <p class="text-xs text-slate-400">Growth Status</p>
    <p id="mStatus" class="text-lg font-semibold badge-ok">On Track</p>
  </div>
</section>

<!-- PIPELINE -->
<section class="card p-4 rounded-xl">
  <h2 class="text-sm font-semibold mb-3">10X Growth Pipeline</h2>
  <div id="pipeline" class="grid sm:grid-cols-6 gap-3 text-xs"></div>
</section>

<!-- TEAM -->
<section class="card p-4 rounded-xl">
  <h2 class="text-sm font-semibold mb-3">Assigned BizLink Team</h2>
  <div id="teamList" class="space-y-2 text-xs"></div>
</section>

</main>

<script>
const API_URL = "PASTE_YOUR_APPS_SCRIPT_URL_HERE";

const email = localStorage.getItem("clientEmail") || "";
document.getElementById("clientEmail").textContent = email;

// LOAD OVERVIEW
fetch(`${API_URL}?action=biz10xClientOverview&email=${email}`)
.then(r=>r.json())
.then(d=>{
  document.getElementById("mLeads").textContent = d.Leads || 0;
  document.getElementById("mSales").textContent = d.Sales || 0;
  document.getElementById("mConv").textContent = (d.Conversion || 0) + "%";
  const st = document.getElementById("mStatus");
  st.textContent = d.GrowthStatus || "On Track";
});

// PIPELINE
fetch(`${API_URL}?action=biz10xPipeline&email=${email}`)
.then(r=>r.json())
.then(list=>{
  document.getElementById("pipeline").innerHTML =
    list.map(p=>`
      <div class="p-3 rounded-lg bg-slate-900 text-center">
        <p class="font-semibold">${p.Stage}</p>
        <p class="${p.Status=='Completed'?'badge-ok':p.Status=='In Progress'?'badge-warn':'badge-bad'}">
          ${p.Status}
        </p>
      </div>
    `).join("");
});

// TEAM
fetch(`${API_URL}?action=biz10xTeam&email=${email}`)
.then(r=>r.json())
.then(list=>{
  document.getElementById("teamList").innerHTML =
    list.map(t=>`
      <div class="flex justify-between">
        <span>${t.Role}</span>
        <span class="text-slate-300">${t.Name}</span>
      </div>
    `).join("");
});
</script>

</body>
</html>
