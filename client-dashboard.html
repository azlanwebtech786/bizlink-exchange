<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BizLink 10X Grow Lab â€“ Client Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Poppins;
  background:linear-gradient(180deg,#050816,#020617);
  color:#e5e7eb;
}
.container{max-width:1200px;margin:auto;padding:24px}
.card{
  background:linear-gradient(180deg,#0f172a,#020617);
  border:1px solid rgba(148,163,184,.15);
  border-radius:14px;
  padding:20px;
}
.grid{display:grid;gap:20px}
.grid-4{grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
.grid-2{grid-template-columns:2fr 1fr}
.small{font-size:13px;color:#94a3b8}
.big{font-size:26px;font-weight:700}
.btn{
  background:linear-gradient(90deg,#8b5cf6,#ec4899);
  border:none;
  padding:12px 18px;
  border-radius:10px;
  color:#fff;
  cursor:pointer;
}
.badge{
  background:#7c3aed;
  padding:4px 10px;
  border-radius:999px;
  font-size:12px;
}
.lock{opacity:.5}
</style>
</head>

<body>

<div class="container">

  <!-- HEADER -->
  <div class="card grid grid-2">
    <div>
      <div class="small">Client Dashboard</div>
      <h2 id="clientName">Loading...</h2>
      <div class="small">City: <span id="clientCity">â€”</span></div>
      <span class="badge" id="clientPlan">â€”</span>
    </div>
    <div style="text-align:right">
      <div class="small">Current Plan</div>
      <div class="big" id="planName">â€”</div>
      <div class="small"><span id="daysLeft">0</span> days remaining</div><br>
      <button class="btn">Upgrade / Change Plan</button>
    </div>
  </div>

  <br>

  <!-- METRICS -->
  <div class="grid grid-4">
    <div class="card"><div class="small">Leads this month</div><div class="big" id="leads">0</div></div>
    <div class="card"><div class="small">Posts published</div><div class="big" id="posts">0</div></div>
    <div class="card"><div class="small">Reels produced</div><div class="big" id="reels">0</div></div>
    <div class="card"><div class="small">Ad Spend (â‚¹)</div><div class="big" id="adSpend">0</div></div>
  </div>

  <br>

  <!-- CONTENT ENGINE -->
  <div class="card">
    <h3>Content Engine (Posts + Reels)</h3>
    <div class="grid grid-4">
      <div>
        <div class="small">Planned Posts</div>
        <div class="big"><span id="donePosts">0</span> / <span id="totalPosts">0</span></div>
      </div>
      <div>
        <div class="small">Reels</div>
        <div class="big"><span id="doneReels">0</span> / <span id="totalReels">0</span></div>
      </div>
      <div>
        <div class="small">Status</div>
        <div class="big" id="contentStatus">â€”</div>
      </div>
    </div>
  </div>

  <br>

  <!-- ADS -->
  <div class="card">
    <h3>Ads & 3km Targeting</h3>
    <div class="grid grid-4">
      <div><div class="small">Campaigns Running</div><div class="big">0</div></div>
      <div><div class="small">Leads from Ads</div><div class="big">0</div></div>
      <div><div class="small">Avg CPL</div><div class="big">â‚¹0</div></div>
    </div>
  </div>

  <br>

  <!-- AUTOMATION -->
  <div class="card">
    <h3>Automation & CRM</h3>
    <div class="grid grid-4">
      <div><div class="small">Active Flows</div><div class="big">0</div></div>
      <div><div class="small">Leads in Pipeline</div><div class="big">0</div></div>
      <div><div class="small">Follow-up Tasks</div><div class="big">0</div></div>
    </div>
  </div>

  <br>

  <!-- PLAN SUMMARY -->
  <div class="card">
    <h3>Your Plan Summary</h3>
    <ul class="small">
      <li>30 posts + 8 reels / month</li>
      <li>3 km hyperlocal ad campaigns</li>
      <li>WhatsApp lead funnel & automation</li>
    </ul>
    <div class="lock small">
      ðŸ”’ Advanced retention & scaling (Premium only)
    </div>
  </div>

  <br>

  <!-- GROWTH OFFICER -->
  <div class="card">
    <h3>Growth Officer Contact</h3>
    <p class="small">Aapka dedicated Growth Officer aapke plan ke according kaam karta hai.</p>
    <button class="btn">Talk to Growth Officer</button>
  </div>

</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbzJvUnmkM7wUuvNt0XaSHE7YEn1FnLqQ2XX-Fues2h4q53MuGtRkoU0iGJ1auI1lSqoRQ/exec";

const email = new URLSearchParams(window.location.search).get("email");

fetch(`${API_URL}?action=getClientDashboard&email=${email}`)
.then(r=>r.json())
.then(d=>{
  if(!d.ok){alert("Client not found");return;}

  document.getElementById("clientName").innerText = d.client.name;
  document.getElementById("clientCity").innerText = d.client.city || "-";
  document.getElementById("clientPlan").innerText = d.client.plan;
  document.getElementById("planName").innerText = d.client.plan;
  document.getElementById("daysLeft").innerText = d.client.daysRemaining || 0;

  document.getElementById("leads").innerText = d.metrics.leads;
  document.getElementById("posts").innerText = d.metrics.posts;
  document.getElementById("reels").innerText = d.metrics.reels;
  document.getElementById("adSpend").innerText = d.metrics.adSpend;

  document.getElementById("donePosts").innerText = d.content.donePosts;
  document.getElementById("totalPosts").innerText = d.content.plannedPosts;
  document.getElementById("doneReels").innerText = d.content.doneReels;
  document.getElementById("totalReels").innerText = d.content.plannedReels;
  document.getElementById("contentStatus").innerText = d.content.status;
});
</script>

</body>
</html>
