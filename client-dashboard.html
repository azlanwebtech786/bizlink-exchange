<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BizLink | Client Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind + Font -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #050816;
      color: #e5e7eb;
      min-height: 100vh;
    }
    .card-bg {
      background: #020617cc;
      border: 1px solid rgba(148, 163, 184, 0.4);
      backdrop-filter: blur(18px);
    }
    .button-gradient {
      background: linear-gradient(90deg, #a855f7 0%, #ec4899 100%);
    }
    .plan-badge {
      font-size: 0.7rem;
      padding: 0.1rem 0.6rem;
      border-radius: 999px;
    }
    .locked::after {
      content: "Upgrade to unlock";
      position: absolute;
      inset: 0;
      background: rgba(15, 23, 42, 0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      color: #facc15;
      font-weight: 600;
      border-radius: 0.75rem;
    }
  </style>
</head>
<body class="text-gray-200">

  <!-- HEADER (same feel as index) -->
  <header class="sticky top-0 bg-[#020617] bg-opacity-95 z-40 shadow-lg">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-2">
        <span class="text-xl sm:text-2xl font-bold text-white">
          BizLink <span class="text-purple-400">Exchange</span>
        </span>
      </a>
      <div class="flex items-center gap-4 text-xs sm:text-sm">
        <div class="hidden sm:block text-right">
          <p class="text-gray-400">Logged in as</p>
          <p id="clientEmail" class="font-semibold text-white truncate max-w-[200px]"></p>
        </div>
        <button id="logoutBtn" class="bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-md text-xs sm:text-sm font-semibold">
          Logout
        </button>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="max-w-6xl mx-auto px-4 py-6 sm:py-10">
    <!-- Top summary -->
    <section class="mb-6 sm:mb-10">
      <div class="grid gap-4 sm:grid-cols-3">
        <div class="card-bg rounded-2xl p-4 sm:p-5">
          <p class="text-xs text-gray-400 mb-1">Your Active Plan</p>
          <div class="flex items-center justify-between">
            <div>
              <h2 id="planName" class="text-xl sm:text-2xl font-bold text-white">–</h2>
              <p id="planTagline" class="text-xs sm:text-sm text-gray-400 mt-1"></p>
            </div>
            <span id="planBadge" class="plan-badge bg-purple-600 text-white uppercase tracking-wide">
              –
            </span>
          </div>
          <p id="planNote" class="mt-3 text-xs text-gray-400">
            Upgrade plan se aur zyada features unlock honge.
          </p>
        </div>

        <div class="card-bg rounded-2xl p-4 sm:p-5">
          <p class="text-xs text-gray-400 mb-1">This Month Activity (Dummy)</p>
          <h3 class="text-2xl font-bold text-green-400">24</h3>
          <p class="text-xs text-gray-400 mt-1">Posts + Reels scheduled</p>
          <p class="text-[0.7rem] text-gray-500 mt-2">
            (Abhi demo numbers hain — actual tracking baad me connect kar sakte hain.)
          </p>
        </div>

        <div class="card-bg rounded-2xl p-4 sm:p-5">
          <p class="text-xs text-gray-400 mb-1">Growth Officer Status</p>
          <h3 class="text-base font-semibold text-white" id="growthOfficerText">Email Support Only</h3>
          <p class="text-xs text-gray-400 mt-1">
            Plan ke hisaab se support level auto change hoga.
          </p>
          <a href="#upgradeSection" class="mt-3 inline-block text-xs text-purple-300 hover:text-purple-100">
            Upgrade / Change Plan →
          </a>
        </div>
      </div>
    </section>

    <!-- FEATURE ZONES -->
    <section class="space-y-6 sm:space-y-8">
      <!-- 1. Content Engine -->
      <div>
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-lg sm:text-xl font-semibold text-white">Content Engine</h3>
          <p class="text-xs text-gray-400">Posts + Reels + Creative system</p>
        </div>
        <div class="grid gap-4 sm:grid-cols-3">
          <!-- Basic -->
          <div class="relative card-bg rounded-xl p-4 feature-card" data-min-plan="basic">
            <h4 class="font-semibold text-white text-sm mb-1">Monthly Posts</h4>
            <p class="text-xs text-gray-300 mb-2">Auto content calendar + design.</p>
            <ul class="text-[0.75rem] text-gray-300 space-y-1">
              <li>✔ Basic: 12 posts</li>
              <li>✔ Standard: 30 posts</li>
              <li>✔ Premium: 45 posts</li>
            </ul>
          </div>

          <!-- Standard -->
          <div class="relative card-bg rounded-xl p-4 feature-card" data-min-plan="standard">
            <h4 class="font-semibold text-white text-sm mb-1">Reels Engine</h4>
            <p class="text-xs text-gray-300 mb-2">Short form video system.</p>
            <ul class="text-[0.75rem] text-gray-300 space-y-1">
              <li>✔ Standard: 8 reels / month</li>
              <li>✔ Premium: 12 reels / month</li>
            </ul>
          </div>

          <!-- Premium -->
          <div class="relative card-bg rounded-xl p-4 feature-card" data-min-plan="premium">
            <h4 class="font-semibold text-white text-sm mb-1">Brand Shoot + UGC</h4>
            <p class="text-xs text-gray-300 mb-2">On-site shoot & creators.</p>
            <ul class="text-[0.75rem] text-gray-300 space-y-1">
              <li>✔ Premium only: Quarterly shoot</li>
              <li>✔ 10–15 edited assets / cycle</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- 2. Ads + Funnel -->
      <div>
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-lg sm:text-xl font-semibold text-white">Ads + Lead Funnel</h3>
          <p class="text-xs text-gray-400">Hyperlocal ads & automation</p>
        </div>
        <div class="grid gap-4 sm:grid-cols-3">
          <div class="relative card-bg rounded-xl p-4 feature-card" data-min-plan="standard">
            <h4 class="font-semibold text-white text-sm mb-1">3km Local Ads</h4>
            <p class="text-xs text-gray-300 mb-2">
              Meta / Google ads with 3km radius targeting.
            </p>
            <ul class="text-[0.75rem] text-gray-300 space-y-1">
              <li>✔ Setup & audience research</li>
              <li>✔ 1–2 campaigns live</li>
            </ul>
          </div>

          <div class="relative card-bg rounded-xl p-4 feature-card" data-min-plan="standard">
            <h4 class="font-semibold text-white text-sm mb-1">WhatsApp Funnel</h4>
            <p class="text-xs text-gray-300 mb-2">
              Lead capture → WhatsApp auto follow-ups.
            </p>
            <ul class="text-[0.75rem] text-gray-300 space-y-1">
              <li>✔ Click-to-WhatsApp ads</li>
              <li>✔ Simple drip follow-ups</li>
            </ul>
          </div>

          <div class="relative card-bg rounded-xl p-4 feature-card" data-min-plan="premium">
            <h4 class="font-semibold text-white text-sm mb-1">Advanced Funnel + CRM</h4>
            <p class="text-xs text-gray-300 mb-2">
              Full CRM, retargeting & cold-warm-hot pipeline.
            </p>
            <ul class="text-[0.75rem] text-gray-300 space-y-1">
              <li>✔ CRM setup + tagging</li>
              <li>✔ Retargeting audiences</li>
              <li>✔ Weekly funnel optimisation</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- 3. Retention + Support -->
      <div>
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-lg sm:text-xl font-semibold text-white">Retention & Support</h3>
          <p class="text-xs text-gray-400">Reviews • Reactivation • Support level</p>
        </div>
        <div class="grid gap-4 sm:grid-cols-3">
          <div class="relative card-bg rounded-xl p-4 feature-card" data-min-plan="basic">
            <h4 class="font-semibold text-white text-sm mb-1">Review Boost</h4>
            <p class="text-xs text-gray-300 mb-2">
              Google / social reviews system.
            </p>
            <ul class="text-[0.75rem] text-gray-300 space-y-1">
              <li>✔ Review poster / QR</li>
              <li>✔ Monthly review pushes</li>
            </ul>
          </div>

          <div class="relative card-bg rounded-xl p-4 feature-card" data-min-plan="standard">
            <h4 class="font-semibold text-white text-sm mb-1">Reactivation Campaigns</h4>
            <p class="text-xs text-gray-300 mb-2">
              Purane customers ko wapas lane ke liye campaign.
            </p>
            <ul class="text-[0.75rem] text-gray-300 space-y-1">
              <li>✔ WhatsApp / SMS blasts</li>
              <li>✔ Coupon & offer flows</li>
            </ul>
          </div>

          <div class="relative card-bg rounded-xl p-4 feature-card" data-min-plan="premium">
            <h4 class="font-semibold text-white text-sm mb-1">Dedicated Growth Officer</h4>
            <p class="text-xs text-gray-300 mb-2">
              Monthly strategy call + deep reporting.
            </p>
            <ul class="text-[0.75rem] text-gray-300 space-y-1">
              <li>✔ 2 calls / month</li>
              <li>✔ Custom experiments roadmap</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Upgrade CTA -->
    <section id="upgradeSection" class="mt-10 sm:mt-12">
      <div class="card-bg rounded-2xl p-5 sm:p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4">
        <div>
          <h3 class="text-lg sm:text-xl font-semibold text-white">Want to unlock more features?</h3>
          <p class="text-xs sm:text-sm text-gray-300 mt-1">
            Upgrade plan se reels, ads, CRM aur dedicated support unlock ho jata hai.
          </p>
        </div>
        <a href="index.html#pricing" class="button-gradient text-white px-5 py-2 rounded-lg text-xs sm:text-sm font-semibold text-center">
          View / Change Pricing Plan
        </a>
      </div>
    </section>
  </main>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>

  <script>
    // --------- FIREBASE INIT (same config as rest of site) ----------
    const firebaseConfig = {
      apiKey: "AIzaSyBtle51gX5kHufuWZ_YVOIQdDR05kbCE5I",
      authDomain: "bizlink-exchange.firebaseapp.com",
      projectId: "bizlink-exchange",
      storageBucket: "bizlink-exchange.firebasestorage.app",
      messagingSenderId: "116213651971",
      appId: "1:116213651971:web:fff60961af0c4da3448c36",
      measurementId: "G-VQ3JM82D1N"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    const clientEmailEl = document.getElementById("clientEmail");
    const logoutBtn = document.getElementById("logoutBtn");

    // Plan mapping helper
    const PLAN_LEVEL = {
      "basic": 1,
      "standard": 2,
      "premium": 3
    };

    function normalisePlanName(nameRaw) {
      if (!nameRaw) return "Basic";
      const n = nameRaw.toString().toLowerCase();
      if (n.includes("premium")) return "Premium 10X";
      if (n.includes("standard")) return "Standard";
      return "Basic";
    }

    function planKey(name) {
      const n = name.toLowerCase();
      if (n.includes("premium")) return "premium";
      if (n.includes("standard")) return "standard";
      return "basic";
    }

    function applyPlanUI(currentPlanName) {
      const planNameEl = document.getElementById("planName");
      const planTaglineEl = document.getElementById("planTagline");
      const planBadgeEl = document.getElementById("planBadge");
      const growthOfficerText = document.getElementById("growthOfficerText");

      const normName = normalisePlanName(currentPlanName);
      const key = planKey(normName);
      const level = PLAN_LEVEL[key] || 1;

      // Top card text
      planNameEl.textContent = normName;
      planBadgeEl.textContent = key.toUpperCase();

      if (key === "basic") {
        planTaglineEl.textContent = "Starter visibility pack – perfect for testing BizLink system.";
        growthOfficerText.textContent = "Email & WhatsApp Support";
      } else if (key === "standard") {
        planTaglineEl.textContent = "Balanced growth pack – content + ads + automation.";
        growthOfficerText.textContent = "Growth Coordinator + Monthly Check-ins";
      } else {
        planTaglineEl.textContent = "Aggressive scaling – full 10X growth ecosystem.";
        growthOfficerText.textContent = "Dedicated Growth Officer + Strategy Calls";
      }

      // Lock / unlock feature cards
      document.querySelectorAll(".feature-card").forEach(card => {
        const minPlan = (card.getAttribute("data-min-plan") || "basic").toLowerCase();
        const minLevel = PLAN_LEVEL[minPlan] || 1;

        // Reset classes
        card.classList.remove("opacity-40", "locked");

        if (level < minLevel) {
          card.classList.add("opacity-40", "relative", "locked");
        }
      });
    }

    // Auth check
    auth.onAuthStateChanged(user => {
      if (!user) {
        alert("Please login to access your client dashboard.");
        window.location.href = "login.html";
        return;
      }
      const email = user.email || "";
      clientEmailEl.textContent = email;

      // Plan read from localStorage (same key you used on pricing page)
      const localPlan =
        localStorage.getItem("bizlink_current_plan") ||
        localStorage.getItem("selectedPlan") ||
        "Basic";

      applyPlanUI(localPlan);
    });

    logoutBtn.addEventListener("click", () => {
      auth.signOut().then(() => {
        alert("Logged out.");
        window.location.href = "index.html";
      });
    });
  </script>
</body>
</html>
