<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 text-white">

    <div id="profileCard" class="w-full max-w-lg p-8 rounded-2xl glass-card shadow-lg text-center hidden">
        <h1 id="businessName" class="text-4xl font-bold mb-2"></h1>
        <p id="ownerName" class="text-lg text-gray-200 mb-4"></p>
        <div class="text-left space-y-3">
            <p><strong>Email:</strong> <span id="email"></span></p>
            <p><strong>Category:</strong> <span id="category" class="bg-white/20 px-2 py-1 rounded"></span></p>
            <p><strong>City:</strong> <span id="city"></span></p>
            <p><strong>Description:</strong> <span id="description"></span></p>
        </div>
    </div>

    <div id="loadingState" class="text-2xl font-semibold">
        Loading Profile...
    </div>

    <div id="errorState" class="text-2xl font-semibold bg-red-500/50 p-4 rounded-lg hidden">
        ❌ Error fetching data.
    </div>

<script>
    // ❗ IMPORTANT: Yahan apna final, working URL paste karein
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzbVGHIc6R1GrRmzZNoBiD-FUF7Hab2WU3h_tJ0L2Un9AqeqFtAodvMvWHpYd45fvQGLA/exec";

    const profileCard = document.getElementById('profileCard');
    const loadingState = document.getElementById('loadingState');
    const errorState = document.getElementById('errorState');

    // Function to get data from Google Sheet
    async function getProfileData() {
        try {
            // Get the ID from the page URL (e.g., ?id=small-56885)
            const urlParams = new URLSearchParams(window.location.search);
            const profileId = urlParams.get('id');

            if (!profileId) {
                throw new Error("Profile ID not found in URL.");
            }

            // Fetch the specific profile data using the ID
            const response = await fetch(`${SCRIPT_URL}?id=${profileId}`);
            const data = await response.json();

            if (data.status === 'success') {
                // Populate the card with the fetched data
                document.getElementById('businessName').textContent = data.profile['Business Name'] || 'N/A';
                document.getElementById('ownerName').textContent = `by ${data.profile['Owner Name'] || 'N/A'}`;
                document.getElementById('email').textContent = data.profile['Email'] || 'N/A';
                document.getElementById('category').textContent = data.profile['Category'] || 'N/A';
                document.getElementById('city').textContent = data.profile['City'] || 'N/A';
                document.getElementById('description').textContent = data.profile['Description'] || 'N/A';
                
                // Show the profile card and hide loading
                loadingState.classList.add('hidden');
                profileCard.classList.remove('hidden');
            } else {
                throw new Error(data.message || "Profile not found.");
            }
        } catch (error) {
            console.error(error);
            loadingState.classList.add('hidden');
            errorState.classList.remove('hidden');
        }
    }

    // Run the function when the page loads
    window.addEventListener('load', getProfileData);
</script>
</body>
</html>
