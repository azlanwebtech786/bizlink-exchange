<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Business Profile</title>
  <style>
    body {
      background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
      color: white;
      font-family: "Poppins", sans-serif;
      text-align: center;
      padding: 50px 20px;
    }
    .card {
      max-width: 600px;
      margin: auto;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
    }
    h1 { font-size: 28px; margin-bottom: 10px; }
    p { font-size: 16px; margin: 5px 0; }
    .error { margin-top: 150px; font-size: 20px; color: #ffdddd; }
  </style>
</head>
<body>
  <div id="profileContainer">Loading...</div>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbxIeAIhIagyHXO-h-dyUjxm0ifPwHj-QNIkgN8VRKPPvPyBG1OjjAc1sJ8_1_A2r2PT6A/exec";
    const container = document.getElementById("profileContainer");

    // URL से ID निकालो (उदाहरण: startups-2)
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    if (!id) {
      container.innerHTML = `<div class="error">❌ Invalid Profile ID.</div>`;
    } else {
      const [sheetName, rowId] = id.split("-");

      fetch(`${scriptURL}?sheet=${sheetName}&id=${rowId}`)
        .then((res) => res.json())
        .then((data) => {
          if (data.status === "success") {
            const p = data.profile;
            container.innerHTML = `
              <div class="card">
                <h1>${p.Name || "Unnamed"}</h1>
                <p><b>Role:</b> ${p.Role || "-"}</p>
                <p><b>Email:</b> ${p.Email || "-"}</p>
                <p><b>Category:</b> ${p.Category || "-"}</p>
                <p><b>Description:</b> ${p.Description || "-"}</p>
                <p><b>City:</b> ${p.City || "-"}</p>
                <p><b>Portfolio Link:</b> <a href="${p.Portfolio_Link}" target="_blank" style="color:#fff;">View</a></p>
              </div>
            `;
          } else if (data.status === "not_found") {
            container.innerHTML = `<div class="error">⚠️ Profile not found.</div>`;
          } else {
            container.innerHTML = `<div class="error">❌ Error fetching data.</div>`;
          }
        })
        .catch((err) => {
          console.error(err);
          container.innerHTML = `<div class="error">❌ Error fetching data.</div>`;
        });
    }
  </script>
</body>
</html>
