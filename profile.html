<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Business Profile</title>
  <style>
    body {
      background: linear-gradient(135deg, #5b21b6, #9333ea);
      color: white;
      font-family: "Poppins", sans-serif;
      text-align: center;
      padding: 50px 20px;
    }

    .card {
      max-width: 600px;
      margin: auto;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(12px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 0 25px rgba(0, 0, 0, 0.3);
      color: #fff;
    }

    h1 {
      font-size: 28px;
      margin-bottom: 10px;
    }

    p {
      font-size: 16px;
      margin: 6px 0;
    }

    a {
      color: #ffd6ff;
      text-decoration: underline;
    }

    .error {
      margin-top: 150px;
      font-size: 20px;
      color: #ffdddd;
    }
  </style>
</head>
<body>
  <div id="profileContainer">Loading...</div>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbxIeAIhIagyHXO-h-dyUjxm0ifPwHj-QNIkgN8VRKPPvPyBG1OjjAc1sJ8_1_A2r2PT6A/exec";
    const container = document.getElementById("profileContainer");

    // üîç URL ‡§∏‡•á ID ‡§®‡§ø‡§ï‡§æ‡§≤‡•ã (‡§â‡§¶‡§æ‡§π‡§∞‡§£: startups-3)
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    if (!id) {
      container.innerHTML = `<div class="error">‚ùå Invalid Profile ID.</div>`;
    } else {
      const [sheetName, rowId] = id.split("-");

      fetch(`${scriptURL}?sheet=${sheetName}&id=${rowId}`)
        .then((res) => res.json())
        .then((data) => {
          if (data.status === "success") {
            const p = data.profile;

            container.innerHTML = `
              <div class="card">
                <h1>${p["Business Name"] || "Unnamed Business"}</h1>
                <p><b>Owner:</b> ${p["Owner Name"] || "-"}</p>
                <p><b>Role:</b> ${p["Role"] || "-"}</p>
                <p><b>Email:</b> ${p["Email"] || "-"}</p>
                <p><b>Category:</b> ${p["Category"] || "-"}</p>
                <p><b>City:</b> ${p["City"] || "-"}</p>
                <p><b>Description:</b> ${p["Description"] || "No details provided."}</p>
                <br />
                <a href="index.html">‚Üê Back to Home</a>
              </div>
            `;
          } else if (data.status === "not_found") {
            container.innerHTML = `<div class="error">‚ö†Ô∏è Profile not found.</div>`;
          } else {
            container.innerHTML = `<div class="error">‚ùå Error fetching data.</div>`;
          }
        })
        .catch((err) => {
          console.error(err);
          container.innerHTML = `<div class="error">‚ùå Error loading profile.</div>`;
        });
    }
  </script>
</body>
</html>
